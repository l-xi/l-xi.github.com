import{b as ue,d as ye,m as Ne,i as pe,f as wa,s as Ca,u as Sa,a as de,c as Ia,E as Y,e as aa,g as ta,h as sa,z as Ta,j as Ea,r as $a,k as xa,_ as Oe,l as fe,n as J,o as La,w as na,p as oa,q as Aa,t as ka,v as Pa,x as De,y as qe,A as Na,B as la,C as ra,D as ve,F as Oa,G as ae,H as me,I as re,J as ia,K as Ma,L as za,M as Ra,N as Ba,O as Ua,P as Da,Q as qa,R as Fa,S as Va,T as Ga,U as Ha,V as xe,W as Xa,X as Ya,Y as Ka,Z as Wa,$ as Za,a0 as Ja}from"./index-d5d958fb.js";import{E as Qa,j as we,a as Me,b as ja,M as et}from"./message-c547b052.js";import{a0 as at,s as ca,Q as tt,z as q,a1 as Fe,r as y,a2 as st,v as k,w as D,n as Ce,e as Se,k as E,J as ee,C as d,D as x,m as A,F as X,u as _,K as be,P as nt,L as Z,l as R,O as ie,M as ot,a3 as ze,E as Ie,H as ua,A as Te,T as lt,a4 as rt,t as Re,g as Ee,a5 as it,y as ct,h as ut,a6 as dt,X as da,o as va,a7 as j,a8 as vt,G as ce,U as Be,a9 as ge,aa as ft,Z as _t,ab as pt,ac as mt,ad as bt}from"./vue-6d3cdc5e.js";import{f as gt,t as Le,a as Ue,u as ht,U as fa,E as yt,b as _a,c as pa,d as wt}from"./useCached-7f6f5d27.js";import{g as Ct}from"./xgplayer-de833af9.js";import{E as St}from"./index-dc60281a.js";const te=e=>at(e),It=(e,a,t)=>gt(e.subTree).filter(s=>{var n;return tt(s)&&((n=s.type)==null?void 0:n.name)===a&&!!s.component}).map(s=>s.component.uid).map(s=>t[s]).filter(s=>!!s),Tt=(e,a)=>{const t={},o=ca([]);return{children:o,addChild:n=>{t[n.uid]=n,o.value=It(e,a,t)},removeChild:n=>{delete t[n],o.value=o.value.filter(v=>v.uid!==n)}}},Et=ue({urlList:{type:ye(Array),default:()=>Ne([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),$t={close:()=>!0,switch:e=>pe(e),rotate:e=>pe(e)},xt=["src"],Lt=q({name:"ElImageViewer"}),At=q({...Lt,props:Et,emits:$t,setup(e,{expose:a,emit:t}){const o=e,r={CONTAIN:{name:"contain",icon:Fe(wa)},ORIGINAL:{name:"original",icon:Fe(Ca)}},{t:s}=Sa(),n=de("image-viewer"),{nextZIndex:v}=Ia(),p=y(),b=y([]),u=st(),l=y(!0),c=y(o.initialIndex),i=ca(r.CONTAIN),f=y({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),h=k(()=>{const{urlList:g}=o;return g.length<=1}),w=k(()=>c.value===0),m=k(()=>c.value===o.urlList.length-1),I=k(()=>o.urlList[c.value]),T=k(()=>[n.e("btn"),n.e("prev"),n.is("disabled",!o.infinite&&w.value)]),O=k(()=>[n.e("btn"),n.e("next"),n.is("disabled",!o.infinite&&m.value)]),M=k(()=>{const{scale:g,deg:S,offsetX:P,offsetY:H,enableTransition:W}=f.value;let z=P/g,Q=H/g;switch(S%360){case 90:case-270:[z,Q]=[Q,-z];break;case 180:case-180:[z,Q]=[-z,-Q];break;case 270:case-90:[z,Q]=[-Q,z];break}const ne={transform:`scale(${g}) rotate(${S}deg) translate(${z}px, ${Q}px)`,transition:W?"transform .3s":""};return i.value.name===r.CONTAIN.name&&(ne.maxWidth=ne.maxHeight="100%"),ne}),oe=k(()=>pe(o.zIndex)?o.zIndex:v());function se(){$(),t("close")}function le(){const g=Le(P=>{switch(P.code){case J.esc:o.closeOnPressEscape&&se();break;case J.space:B();break;case J.left:V();break;case J.up:K("zoomIn");break;case J.right:N();break;case J.down:K("zoomOut");break}}),S=Le(P=>{const H=P.deltaY||P.deltaX;K(H<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});u.run(()=>{fe(document,"keydown",g),fe(document,"wheel",S)})}function $(){u.stop()}function L(){l.value=!1}function C(g){l.value=!1,g.target.alt=s("el.image.error")}function F(g){if(l.value||g.button!==0||!p.value)return;f.value.enableTransition=!1;const{offsetX:S,offsetY:P}=f.value,H=g.pageX,W=g.pageY,z=Le(ne=>{f.value={...f.value,offsetX:S+ne.pageX-H,offsetY:P+ne.pageY-W}}),Q=fe(document,"mousemove",z);fe(document,"mouseup",()=>{Q()}),g.preventDefault()}function U(){f.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function B(){if(l.value)return;const g=La(r),S=Object.values(r),P=i.value.name,W=(S.findIndex(z=>z.name===P)+1)%g.length;i.value=r[g[W]],U()}function G(g){const S=o.urlList.length;c.value=(g+S)%S}function V(){w.value&&!o.infinite||G(c.value-1)}function N(){m.value&&!o.infinite||G(c.value+1)}function K(g,S={}){if(l.value)return;const{zoomRate:P,rotateDeg:H,enableTransition:W}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...S};switch(g){case"zoomOut":f.value.scale>.2&&(f.value.scale=Number.parseFloat((f.value.scale/P).toFixed(3)));break;case"zoomIn":f.value.scale<7&&(f.value.scale=Number.parseFloat((f.value.scale*P).toFixed(3)));break;case"clockwise":f.value.deg+=H,t("rotate",f.value.deg);break;case"anticlockwise":f.value.deg-=H,t("rotate",f.value.deg);break}f.value.enableTransition=W}return D(I,()=>{Ce(()=>{const g=b.value[0];g!=null&&g.complete||(l.value=!0)})}),D(c,g=>{U(),t("switch",g)}),Se(()=>{var g,S;le(),(S=(g=p.value)==null?void 0:g.focus)==null||S.call(g)}),a({setActiveItem:G}),(g,S)=>(E(),ee(rt,{to:"body",disabled:!g.teleported},[d(lt,{name:"viewer-fade",appear:""},{default:x(()=>[A("div",{ref_key:"wrapper",ref:p,tabindex:-1,class:X(_(n).e("wrapper")),style:be({zIndex:_(oe)})},[A("div",{class:X(_(n).e("mask")),onClick:S[0]||(S[0]=nt(P=>g.hideOnClickModal&&se(),["self"]))},null,2),Z(" CLOSE "),A("span",{class:X([_(n).e("btn"),_(n).e("close")]),onClick:se},[d(_(Y),null,{default:x(()=>[d(_(aa))]),_:1})],2),Z(" ARROW "),_(h)?Z("v-if",!0):(E(),R(ie,{key:0},[A("span",{class:X(_(T)),onClick:V},[d(_(Y),null,{default:x(()=>[d(_(ta))]),_:1})],2),A("span",{class:X(_(O)),onClick:N},[d(_(Y),null,{default:x(()=>[d(_(sa))]),_:1})],2)],64)),Z(" ACTIONS "),A("div",{class:X([_(n).e("btn"),_(n).e("actions")])},[A("div",{class:X(_(n).e("actions__inner"))},[d(_(Y),{onClick:S[1]||(S[1]=P=>K("zoomOut"))},{default:x(()=>[d(_(Ta))]),_:1}),d(_(Y),{onClick:S[2]||(S[2]=P=>K("zoomIn"))},{default:x(()=>[d(_(Ea))]),_:1}),A("i",{class:X(_(n).e("actions__divider"))},null,2),d(_(Y),{onClick:B},{default:x(()=>[(E(),ee(ot(_(i).icon)))]),_:1}),A("i",{class:X(_(n).e("actions__divider"))},null,2),d(_(Y),{onClick:S[3]||(S[3]=P=>K("anticlockwise"))},{default:x(()=>[d(_($a))]),_:1}),d(_(Y),{onClick:S[4]||(S[4]=P=>K("clockwise"))},{default:x(()=>[d(_(xa))]),_:1})],2)],2),Z(" CANVAS "),A("div",{class:X(_(n).e("canvas"))},[(E(!0),R(ie,null,ze(g.urlList,(P,H)=>Ie((E(),R("img",{ref_for:!0,ref:W=>b.value[H]=W,key:P,src:P,style:be(_(M)),class:X(_(n).e("img")),onLoad:L,onError:C,onMousedown:F},null,46,xt)),[[ua,H===c.value]])),128))],2),Te(g.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var kt=Oe(At,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const Pt=na(kt),$e=Symbol("tabsRootContextKey"),Nt=ue({tabs:{type:ye(Array),default:()=>Ne([])}}),ma="ElTabBar",Ot=q({name:ma}),Mt=q({...Ot,props:Nt,setup(e,{expose:a}){const t=e,o=Ee(),r=Re($e);r||Ue(ma,"<el-tabs><el-tab-bar /></el-tabs>");const s=de("tabs"),n=y(),v=y(),p=()=>{let u=0,l=0;const c=["top","bottom"].includes(r.props.tabPosition)?"width":"height",i=c==="width"?"x":"y",f=i==="x"?"left":"top";return t.tabs.every(h=>{var w,m;const I=(m=(w=o.parent)==null?void 0:w.refs)==null?void 0:m[`tab-${h.uid}`];if(!I)return!1;if(!h.active)return!0;u=I[`offset${te(f)}`],l=I[`client${te(c)}`];const T=window.getComputedStyle(I);return c==="width"&&(t.tabs.length>1&&(l-=Number.parseFloat(T.paddingLeft)+Number.parseFloat(T.paddingRight)),u+=Number.parseFloat(T.paddingLeft)),!1}),{[c]:`${l}px`,transform:`translate${te(i)}(${u}px)`}},b=()=>v.value=p();return D(()=>t.tabs,async()=>{await Ce(),b()},{immediate:!0}),oa(n,()=>b()),a({ref:n,update:b}),(u,l)=>(E(),R("div",{ref_key:"barRef",ref:n,class:X([_(s).e("active-bar"),_(s).is(_(r).props.tabPosition)]),style:be(v.value)},null,6))}});var zt=Oe(Mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Rt=ue({panes:{type:ye(Array),default:()=>Ne([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Bt={tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},Ve="ElTabNav",Ut=q({name:Ve,props:Rt,emits:Bt,setup(e,{expose:a,emit:t}){const o=Ee(),r=Re($e);r||Ue(Ve,"<el-tabs><tab-nav /></el-tabs>");const s=de("tabs"),n=Aa(),v=ka(),p=y(),b=y(),u=y(),l=y(),c=y(!1),i=y(0),f=y(!1),h=y(!0),w=k(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),m=k(()=>({transform:`translate${w.value==="width"?"X":"Y"}(-${i.value}px)`})),I=()=>{if(!p.value)return;const $=p.value[`offset${te(w.value)}`],L=i.value;if(!L)return;const C=L>$?L-$:0;i.value=C},T=()=>{if(!p.value||!b.value)return;const $=b.value[`offset${te(w.value)}`],L=p.value[`offset${te(w.value)}`],C=i.value;if($-C<=L)return;const F=$-C>L*2?C+L:$-L;i.value=F},O=async()=>{const $=b.value;if(!c.value||!u.value||!p.value||!$)return;await Ce();const L=u.value.querySelector(".is-active");if(!L)return;const C=p.value,F=["top","bottom"].includes(r.props.tabPosition),U=L.getBoundingClientRect(),B=C.getBoundingClientRect(),G=F?$.offsetWidth-B.width:$.offsetHeight-B.height,V=i.value;let N=V;F?(U.left<B.left&&(N=V-(B.left-U.left)),U.right>B.right&&(N=V+U.right-B.right)):(U.top<B.top&&(N=V-(B.top-U.top)),U.bottom>B.bottom&&(N=V+(U.bottom-B.bottom))),N=Math.max(N,0),i.value=Math.min(N,G)},M=()=>{var $;if(!b.value||!p.value)return;e.stretch&&(($=l.value)==null||$.update());const L=b.value[`offset${te(w.value)}`],C=p.value[`offset${te(w.value)}`],F=i.value;C<L?(c.value=c.value||{},c.value.prev=F,c.value.next=F+C<L,L-F<C&&(i.value=L-C)):(c.value=!1,F>0&&(i.value=0))},oe=$=>{const L=$.code,{up:C,down:F,left:U,right:B}=J;if(![C,F,U,B].includes(L))return;const G=Array.from($.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),V=G.indexOf($.target);let N;L===U||L===C?V===0?N=G.length-1:N=V-1:V<G.length-1?N=V+1:N=0,G[N].focus({preventScroll:!0}),G[N].click(),se()},se=()=>{h.value&&(f.value=!0)},le=()=>f.value=!1;return D(n,$=>{$==="hidden"?h.value=!1:$==="visible"&&setTimeout(()=>h.value=!0,50)}),D(v,$=>{$?setTimeout(()=>h.value=!0,50):h.value=!1}),oa(u,M),Se(()=>setTimeout(()=>O(),0)),it(()=>M()),a({scrollToActiveTab:O,removeFocus:le}),D(()=>e.panes,()=>o.update(),{flush:"post",deep:!0}),()=>{const $=c.value?[d("span",{class:[s.e("nav-prev"),s.is("disabled",!c.value.prev)],onClick:I},[d(Y,null,{default:()=>[d(ta,null,null)]})]),d("span",{class:[s.e("nav-next"),s.is("disabled",!c.value.next)],onClick:T},[d(Y,null,{default:()=>[d(sa,null,null)]})])]:null,L=e.panes.map((C,F)=>{var U,B,G,V;const N=C.uid,K=C.props.disabled,g=(B=(U=C.props.name)!=null?U:C.index)!=null?B:`${F}`,S=!K&&(C.isClosable||e.editable);C.index=`${F}`;const P=S?d(Y,{class:"is-icon-close",onClick:z=>t("tabRemove",C,z)},{default:()=>[d(aa,null,null)]}):null,H=((V=(G=C.slots).label)==null?void 0:V.call(G))||C.props.label,W=!K&&C.active?0:-1;return d("div",{ref:`tab-${N}`,class:[s.e("item"),s.is(r.props.tabPosition),s.is("active",C.active),s.is("disabled",K),s.is("closable",S),s.is("focus",f.value)],id:`tab-${g}`,key:`tab-${N}`,"aria-controls":`pane-${g}`,role:"tab","aria-selected":C.active,tabindex:W,onFocus:()=>se(),onBlur:()=>le(),onClick:z=>{le(),t("tabClick",C,g,z)},onKeydown:z=>{S&&(z.code===J.delete||z.code===J.backspace)&&t("tabRemove",C,z)}},[H,P])});return d("div",{ref:u,class:[s.e("nav-wrap"),s.is("scrollable",!!c.value),s.is(r.props.tabPosition)]},[$,d("div",{class:s.e("nav-scroll"),ref:p},[d("div",{class:[s.e("nav"),s.is(r.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:b,style:m.value,role:"tablist",onKeydown:oe},[e.type?null:d(zt,{ref:l,tabs:[...e.panes]},null),L])])])}}}),Dt=ue({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ye(Function),default:()=>!0},stretch:Boolean}),Ae=e=>ut(e)||pe(e),qt={[fa]:e=>Ae(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>Ae(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>Ae(e),tabAdd:()=>!0};var Ft=q({name:"ElTabs",props:Dt,emits:qt,setup(e,{emit:a,slots:t,expose:o}){var r,s;const n=de("tabs"),{children:v,addChild:p,removeChild:b}=Tt(Ee(),"ElTabPane"),u=y(),l=y((s=(r=e.modelValue)!=null?r:e.activeName)!=null?s:"0"),c=m=>{l.value=m,a(fa,m),a("tabChange",m)},i=async m=>{var I,T,O;if(!(l.value===m||De(m)))try{await((I=e.beforeLeave)==null?void 0:I.call(e,m,l.value))!==!1&&(c(m),(O=(T=u.value)==null?void 0:T.removeFocus)==null||O.call(T))}catch{}},f=(m,I,T)=>{m.props.disabled||(i(I),a("tabClick",m,T))},h=(m,I)=>{m.props.disabled||De(m.props.name)||(I.stopPropagation(),a("edit",m.props.name,"remove"),a("tabRemove",m.props.name))},w=()=>{a("edit",void 0,"add"),a("tabAdd")};return ht({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},k(()=>!!e.activeName)),D(()=>e.activeName,m=>i(m)),D(()=>e.modelValue,m=>i(m)),D(l,async()=>{var m;await Ce(),(m=u.value)==null||m.scrollToActiveTab()}),ct($e,{props:e,currentName:l,registerPane:p,unregisterPane:b}),o({currentName:l}),()=>{const m=e.editable||e.addable?d("span",{class:n.e("new-tab"),tabindex:"0",onClick:w,onKeydown:O=>{O.code===J.enter&&w()}},[d(Y,{class:n.is("icon-plus")},{default:()=>[d(Pa,null,null)]})]):null,I=d("div",{class:[n.e("header"),n.is(e.tabPosition)]},[m,d(Ut,{ref:u,currentName:l.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:f,onTabRemove:h},null)]),T=d("div",{class:n.e("content")},[Te(t,"default")]);return d("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[I,T]:[T,I]])}}});const Vt=ue({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Gt=["id","aria-hidden","aria-labelledby"],ba="ElTabPane",Ht=q({name:ba}),Xt=q({...Ht,props:Vt,setup(e){const a=e,t=Ee(),o=dt(),r=Re($e);r||Ue(ba,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=de("tab-pane"),n=y(),v=k(()=>a.closable||r.props.closable),p=qe(()=>{var i;return r.currentName.value===((i=a.name)!=null?i:n.value)}),b=y(p.value),u=k(()=>{var i;return(i=a.name)!=null?i:n.value}),l=qe(()=>!a.lazy||b.value||p.value);D(p,i=>{i&&(b.value=!0)});const c=da({uid:t.uid,slots:o,props:a,paneName:u,active:p,index:n,isClosable:v});return Se(()=>{r.registerPane(c)}),va(()=>{r.unregisterPane(c.uid)}),(i,f)=>_(l)?Ie((E(),R("div",{key:0,id:`pane-${_(u)}`,class:X(_(s).b()),role:"tabpanel","aria-hidden":!_(p),"aria-labelledby":`tab-${_(u)}`},[Te(i.$slots,"default")],10,Gt)),[[ua,_(p)]]):Z("v-if",!0)}});var ga=Oe(Xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Yt=na(Ft,{TabPane:ga}),Kt=Na(ga);const Wt="/assets/qrcode-38047f9e.jpeg",Zt={class:"side-toolbar"},Jt={class:"tool-icons"},Qt={class:"menu"},jt=["src"],es=["title","onClick"],as={key:0,class:"menu-item-name"},ts=q({__name:"index",setup(e){const a=we(),t=y(!1),o=la(),r=ra(),s=ve(),n=k(()=>o==null?void 0:o.userInfo.avatar),v=k(()=>s.unReadMark),p=()=>t.value=!0,b=()=>r.showGroupList=!r.showGroupList,u=k(()=>a==="PC"),l=[{name:"",desc:"哔哩哔哩",icon:"bilibili",handler:()=>{window.open("https://space.bilibili.com/146719540","_blank")}},{name:"项目文档",desc:"语雀",icon:"yuque",handler:()=>{window.open("https://www.yuque.com/snab/planet/cef1mcko4fve0ur3","_blank")}},{name:"618超优惠",desc:"腾讯云",icon:"qcloud",handler:()=>{window.open("https://curl.qcloud.com/qSaH0JLT","_blank")}},{name:"后端源码",desc:"MallChatWeb Server",icon:"github",handler:()=>{window.open("https://github.com/zongzibinbin/MallChat","_blank")}},{name:"前端源码",desc:"MallChatWeb Web",icon:"github",handler:()=>{window.open("https://github.com/Evansy/MallChatWeb","_blank")}}];return(c,i)=>{const f=j("Avatar"),h=j("Icon"),w=Oa,m=j("router-link"),I=Qa,T=j("UserSettingBox"),O=vt("login");return E(),R("aside",Zt,[Ie(d(f,{src:_(o).isSign?n.value:"",size:u.value?50:40},null,8,["src","size"]),[[O,p]]),A("div",Jt,[d(m,{exactActiveClass:"tool-icon-active",to:"/"},{default:x(()=>[d(w,{value:v.value.newMsgUnreadCount,hidden:v.value.newMsgUnreadCount===0,max:99},{default:x(()=>[d(h,{class:"tool-icon",icon:"chat",size:28})]),_:1},8,["value","hidden"])]),_:1}),d(m,{exactActiveClass:"tool-icon-active",to:"/contact"},{default:x(()=>[d(w,{value:v.value.newFriendUnreadCount,hidden:v.value.newFriendUnreadCount===0,max:99},{default:x(()=>[d(h,{class:"tool-icon",icon:"group",size:28})]),_:1},8,["value","hidden"])]),_:1})]),A("div",Qt,[d(I,{effect:"dark",placement:u.value?"right":"bottom"},{content:x(()=>[A("img",{class:"icon-wechat-qrcode",src:_(Wt),alt:"wx qrcode"},null,8,jt)]),default:x(()=>[d(h,{icon:"weixin",size:28,colorful:""})]),_:1},8,["placement"]),(E(),R(ie,null,ze(l,(M,oe)=>A("a",{class:"menu-item",key:oe,title:M.desc,onClick:M.handler},[d(h,{icon:M.icon,size:28,colorful:""},null,8,["icon"]),M.name?(E(),R("span",as,ce(M.name),1)):Z("",!0)],8,es)),64))]),d(h,{icon:"zhankai",size:28,onClick:b}),d(T,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=M=>t.value=M)},null,8,["modelValue"])])}}});const ss=ae(ts,[["__scopeId","data-v-f4273e1d"]]),ns=Be("image",()=>{const e=y(""),a=y(!1);return{previewUrl:e,isShowing:a,show:r=>{e.value=r,a.value=!0},close:()=>{a.value=!1,e.value=""}}});Be("voice",()=>{const e=y(""),a=y(!1),t=y(0),o=y(null),r=()=>{var n,v;a.value=!1,t.value=0,(n=o.value)==null||n.pause(),(v=o.value)==null||v.removeEventListener("ended",()=>{}),o.value=null};return{previewUrl:e,isPlaying:a,close:r,open:async n=>{if(a.value&&e.value===n){r();return}r(),e.value=n,o.value=new Audio(n),await o.value.play(),a.value=!0,o.value.addEventListener("ended",()=>r())}}});const os=Be("video",()=>{const e=y(""),a=y(!1);return{previewUrl:e,isPlaying:a,open:r=>{e.value=r,a.value=!0},close:()=>{e.value="",a.value=!1}}}),ls={class:"dialog-footer"},rs=q({__name:"index",setup(e){const a=we(),t=ve(),o=y(),{send:r,loading:s}=me(re.sendAddFriendRequest,{immediate:!1}),n=k(()=>t.addFriendModalInfo.show),v=()=>{t.addFriendModalInfo.show=!1,t.addFriendModalInfo.uid=void 0},p=async()=>{await r({msg:o.value,targetUid:t.addFriendModalInfo.uid}),ia.success("TA一定会被你的诚意打动的~"),v()};return(b,u)=>{const l=yt,c=_a,i=Me;return E(),ee(i,{class:"setting-box-modal","model-value":n.value,width:_(a)==="PC"?350:"50%","close-on-click-modal":!1,center:"","show-close":!1,onClose:v},{footer:x(()=>[A("span",ls,[d(c,{onClick:v},{default:x(()=>[ge("取消")]),_:1}),d(c,{type:"primary",onClick:p,loading:_(s)},{default:x(()=>[ge("发送")]),_:1},8,["loading"])])]),default:x(()=>[d(l,{autosize:{minRows:4,maxRows:4},maxlength:50,type:"textarea",resize:"none",modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=f=>o.value=f),placeholder:"发条有趣的问候语吧~"},null,8,["modelValue"])]),_:1},8,["model-value","width"])}}});const is=ae(rs,[["__scopeId","data-v-d0a1deb3"]]);var cs="__lodash_hash_undefined__";function us(e){return this.__data__.set(e,cs),this}var ds=us;function vs(e){return this.__data__.has(e)}var fs=vs,_s=Ma,ps=ds,ms=fs;function he(e){var a=-1,t=e==null?0:e.length;for(this.__data__=new _s;++a<t;)this.add(e[a])}he.prototype.add=he.prototype.push=ps;he.prototype.has=ms;var bs=he;function gs(e,a){for(var t=-1,o=e==null?0:e.length;++t<o;)if(a(e[t],t,e))return!0;return!1}var hs=gs;function ys(e,a){return e.has(a)}var ws=ys,Cs=bs,Ss=hs,Is=ws,Ts=1,Es=2;function $s(e,a,t,o,r,s){var n=t&Ts,v=e.length,p=a.length;if(v!=p&&!(n&&p>v))return!1;var b=s.get(e),u=s.get(a);if(b&&u)return b==a&&u==e;var l=-1,c=!0,i=t&Es?new Cs:void 0;for(s.set(e,a),s.set(a,e);++l<v;){var f=e[l],h=a[l];if(o)var w=n?o(h,f,l,a,e,s):o(f,h,l,e,a,s);if(w!==void 0){if(w)continue;c=!1;break}if(i){if(!Ss(a,function(m,I){if(!Is(i,I)&&(f===m||r(f,m,t,o,s)))return i.push(I)})){c=!1;break}}else if(!(f===h||r(f,h,t,o,s))){c=!1;break}}return s.delete(e),s.delete(a),c}var ha=$s;function xs(e){var a=-1,t=Array(e.size);return e.forEach(function(o,r){t[++a]=[r,o]}),t}var Ls=xs;function As(e){var a=-1,t=Array(e.size);return e.forEach(function(o){t[++a]=o}),t}var ks=As,Ge=za,He=Ra,Ps=Ba,Ns=ha,Os=Ls,Ms=ks,zs=1,Rs=2,Bs="[object Boolean]",Us="[object Date]",Ds="[object Error]",qs="[object Map]",Fs="[object Number]",Vs="[object RegExp]",Gs="[object Set]",Hs="[object String]",Xs="[object Symbol]",Ys="[object ArrayBuffer]",Ks="[object DataView]",Xe=Ge?Ge.prototype:void 0,ke=Xe?Xe.valueOf:void 0;function Ws(e,a,t,o,r,s,n){switch(t){case Ks:if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case Ys:return!(e.byteLength!=a.byteLength||!s(new He(e),new He(a)));case Bs:case Us:case Fs:return Ps(+e,+a);case Ds:return e.name==a.name&&e.message==a.message;case Vs:case Hs:return e==a+"";case qs:var v=Os;case Gs:var p=o&zs;if(v||(v=Ms),e.size!=a.size&&!p)return!1;var b=n.get(e);if(b)return b==a;o|=Rs,n.set(e,a);var u=Ns(v(e),v(a),o,r,s,n);return n.delete(e),u;case Xs:if(ke)return ke.call(e)==ke.call(a)}return!1}var Zs=Ws,Ye=Ua,Js=1,Qs=Object.prototype,js=Qs.hasOwnProperty;function en(e,a,t,o,r,s){var n=t&Js,v=Ye(e),p=v.length,b=Ye(a),u=b.length;if(p!=u&&!n)return!1;for(var l=p;l--;){var c=v[l];if(!(n?c in a:js.call(a,c)))return!1}var i=s.get(e),f=s.get(a);if(i&&f)return i==a&&f==e;var h=!0;s.set(e,a),s.set(a,e);for(var w=n;++l<p;){c=v[l];var m=e[c],I=a[c];if(o)var T=n?o(I,m,c,a,e,s):o(m,I,c,e,a,s);if(!(T===void 0?m===I||r(m,I,t,o,s):T)){h=!1;break}w||(w=c=="constructor")}if(h&&!w){var O=e.constructor,M=a.constructor;O!=M&&"constructor"in e&&"constructor"in a&&!(typeof O=="function"&&O instanceof O&&typeof M=="function"&&M instanceof M)&&(h=!1)}return s.delete(e),s.delete(a),h}var an=en,Pe=Da,tn=ha,sn=Zs,nn=an,Ke=qa,We=Ga,Ze=Fa,on=Va,ln=1,Je="[object Arguments]",Qe="[object Array]",_e="[object Object]",rn=Object.prototype,je=rn.hasOwnProperty;function cn(e,a,t,o,r,s){var n=We(e),v=We(a),p=n?Qe:Ke(e),b=v?Qe:Ke(a);p=p==Je?_e:p,b=b==Je?_e:b;var u=p==_e,l=b==_e,c=p==b;if(c&&Ze(e)){if(!Ze(a))return!1;n=!0,u=!1}if(c&&!u)return s||(s=new Pe),n||on(e)?tn(e,a,t,o,r,s):sn(e,a,p,t,o,r,s);if(!(t&ln)){var i=u&&je.call(e,"__wrapped__"),f=l&&je.call(a,"__wrapped__");if(i||f){var h=i?e.value():e,w=f?a.value():a;return s||(s=new Pe),r(h,w,t,o,s)}}return c?(s||(s=new Pe),nn(e,a,t,o,r,s)):!1}var un=cn,dn=un,ea=Ha;function ya(e,a,t,o,r){return e===a?!0:e==null||a==null||!ea(e)&&!ea(a)?e!==e&&a!==a:dn(e,a,t,o,ya,r)}var vn=ya,fn=vn;function _n(e,a){return fn(e,a)}var pn=_n;const mn=Ct(pn),bn={class:"person-item"},gn={class:"person-item__name"},hn=q({__name:"UserItem",props:{uid:{}},setup(e){const a=e,{uid:t}=ft(a),o=pa(t);return(r,s)=>{const n=j("Avatar");return E(),R("li",bn,[d(n,{class:"avatar",src:_(o).avatar,size:30},null,8,["src"]),A("div",gn,ce(_(o).name),1)])}}});const yn=ae(hn,[["__scopeId","data-v-5e048606"]]),wn={class:"read-unread-list",style:{overflow:"auto"}},Cn={key:0,class:"read-unread-no-data"},Sn=q({__name:"index",setup(e){const a=we(),t=ve(),o={1:{list:[],cursor:"",isLast:!1},2:{list:[],cursor:"",isLast:!1}},r=k({get(){return t.currentReadUnreadList.show},set(i){t.currentReadUnreadList.show=i,i===!1&&(t.currentReadUnreadList.msgId=null,n.value=1,v[1]=xe(o[1]),v[2]=xe(o[2]))}}),s=k(()=>t.currentReadUnreadList.msgId),n=y(1),v=da(xe(o)),p=k(()=>v[n.value]),{send:b,data:u}=me(re.getMsgReadList,{immediate:!1});D(u,(i,f)=>{!i||mn(i,f)||(v[n.value].cursor=i.cursor,v[n.value].list.push(...i.list),v[n.value].isLast=i.isLast)}),D(n,(i,f)=>{i!==f&&s.value&&p.value.cursor===""&&b({params:{searchType:n.value,pageSize:20,msgId:s.value,cursor:p.value.cursor||void 0}})}),D(r,i=>{i&&s.value&&b({params:{searchType:n.value,pageSize:20,msgId:s.value,cursor:p.value.cursor||void 0}})});const l=i=>{n.value=i.paneName},c=()=>{p.value.isLast||b({params:{searchType:n.value,pageSize:20,msgId:s.value,cursor:p.value.cursor||void 0}})};return(i,f)=>{const h=Kt,w=Yt,m=Me,I=wt;return E(),ee(m,{class:"msg-read-modal",modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=T=>r.value=T),width:_(a)==="PC"?350:"85%","close-on-click-modal":!1,center:""},{default:x(()=>[d(w,{type:"border-card",stretch:"",modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=T=>n.value=T),class:"demo-tabs",onTabClick:l},{default:x(()=>{var T;return[d(h,{style:{width:"50%"},label:"已读",name:1},null,8,["name"]),d(h,{style:{width:"50%"},label:"未读",name:2},null,8,["name"]),Ie((E(),R("ul",wn,[(E(!0),R(ie,null,ze(p.value.list,O=>(E(),ee(yn,{key:O.uid,uid:O.uid},null,8,["uid"]))),128)),((T=p.value.list)==null?void 0:T.length)===0?(E(),R("li",Cn,"暂无数据~")):Z("",!0)])),[[I,c]])]}),_:1},8,["modelValue"])]),_:1},8,["modelValue","width"])}}});const In=ae(Sn,[["__scopeId","data-v-f8b7bd33"]]),Tn=["src"],En={key:2,class:"status"},$n=q({__name:"index",props:{src:{default:""},size:{default:40},shape:{default:"circle"},showStatus:{type:Boolean,default:!1},online:{type:Boolean,default:!0}},setup(e){const a=y(!1);return(t,o)=>{const r=j("Icon");return E(),R("div",{class:X(["avatar",`avatar-${t.shape}`,{downline:!t.online}]),style:be({width:t.size+"px",height:t.size+"px"})},[t.src?(E(),R(ie,{key:0},[a.value?(E(),ee(r,{key:0,icon:"avatar",size:t.size},null,8,["size"])):(E(),R("img",{key:1,src:t.src,alt:"avatar",onError:o[0]||(o[0]=s=>a.value=!0)},null,40,Tn))],64)):Te(t.$slots,"default",{key:1},()=>[d(r,{icon:"avatar",size:t.size},null,8,["size"])],!0),t.showStatus?(E(),R("i",En)):Z("",!0)],6)}}});const xn=ae($n,[["__scopeId","data-v-f01ae017"]]),Ln=q({__name:"SelectUser",emits:["checked"],setup(e,{emit:a}){const t=ve(),o=Xa(),r=y([]),s=k(()=>o.contactsList),n=k(()=>t.createGroupModalInfo.selectedUid);D(s,u=>{r.value=u.map(l=>({label:l.uid,key:l.uid,initial:l.uid,disabled:!1}))},{immediate:!0,deep:!0}),D(n,u=>{u.forEach(l=>{const c=r.value.find(i=>i.key===l);c&&(c.disabled=!0)})},{immediate:!0});const v=y([]),p=(u,l)=>{const c=pa(l.key);return u("div",{style:"display:flex;align-items:center;gap:6px"},[u(xn,{src:c.value.avatar,size:20,class:"avatar"}),u("div",{class:"tem-info-name"},c.value.name)])},b=()=>{a("checked",Object.values(v.value))};return(u,l)=>{const c=ja;return E(),ee(c,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=i=>v.value=i),style:{display:"inline-block","text-align":"left"},"render-content":p,titles:["Source","Target"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:r.value,onChange:b},null,8,["modelValue","data"])}}});const An=ae(Ln,[["__scopeId","data-v-35918dca"]]),kn={class:"dialog-footer"},Pn=q({__name:"index",setup(e){const a=we(),t=ve(),o=ra(),r=y([]),{send:s,loading:n}=me(re.createGroup,{immediate:!1}),{send:v,loading:p}=me(re.inviteGroupMember,{immediate:!1}),b=k(()=>t.createGroupModalInfo.show),u=k(()=>t.createGroupModalInfo.isInvite),l=()=>{t.createGroupModalInfo.show=!1,t.createGroupModalInfo.isInvite=!1,t.createGroupModalInfo.selectedUid=[]},c=async()=>{if(r.value.length!==0){if(u.value)await v({roomId:t.currentSession.roomId,uidList:r.value}),o.getGroupUserList(!0);else{const{id:f}=await s({uidList:r.value});ia.success("群聊创建成功~"),t.currentSession.roomId=f,t.currentSession.type=Ya.Group}l()}},i=f=>{r.value=f};return(f,h)=>{const w=_a,m=Me;return E(),ee(m,{class:"setting-box-modal","model-value":b.value,width:_(a)==="PC"?620:"50%","close-on-click-modal":!1,center:"","show-close":!1,onClose:l},{footer:x(()=>[A("span",kn,[d(w,{onClick:l},{default:x(()=>[ge("取消")]),_:1}),d(w,{type:"primary",onClick:c,loading:_(n)||_(p),disabled:r.value.length===0},{default:x(()=>[ge(ce(u.value?"邀请":"创建"),1)]),_:1},8,["loading","disabled"])])]),default:x(()=>[d(An,{onChecked:i})]),_:1},8,["model-value","width"])}}});const Nn=ae(Pn,[["__scopeId","data-v-22029695"]]),On={class:"post-confirm_box"},Mn={class:"contact-info"},zn=["src","title"],Rn={class:"msg-body"},Bn=q({__name:"PostCard",props:{session:{},message:{}},setup(e){return(a,t)=>{var o;return E(),R("div",On,[A("div",Mn,[A("img",{src:a.session.avatar,alt:"${session.avatar}",title:a.session.name,class:"session-avatar"},null,8,zn),A("span",null,ce(a.session.name),1)]),A("div",Rn,ce(_(et)[a.message.message.type]??((o=a.message.message.body)==null?void 0:o.content)),1)])}}});const Un=ae(Bn,[["__scopeId","data-v-f1f38c14"]]),Dn=e=>(pt("data-v-dac9418b"),e=e(),mt(),e),qn={class:"home"},Fn=Dn(()=>A("footer",{class:"footer"},[A("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"},"闽ICP备2023004110号")],-1)),Vn={key:1,class:"video-play",style:{"pointer-events":"none"}},Gn=q({__name:"index",setup(e){const a=ns(),t=os(),o=la(),r=Ka(),s=y(),n=u=>{u.key==="Escape"&&t.close()};D(()=>t.isPlaying,u=>{u?window.addEventListener("keydown",n):window.removeEventListener("keydown",n)}),D(()=>o.isSign,u=>{u&&(Za(),Ja())},{immediate:!0});const v={messageId:null,dragStart(u){const l=u.target;this.messageId=Number(l.dataset.messageId)},dragOver(u){u.preventDefault();const l=u.target;l.dataset.roomId&&(l.style.backgroundColor="var(--hover-bg-1)")},dragLeave(u){u.preventDefault();const l=u.target;l.dataset.roomId&&(l.style.backgroundColor="")},drop(u){const l=u.target;if(l.dataset.roomId&&this.messageId){l.style.backgroundColor="";const c=r.getMessage(Number(this.messageId)),i=r.getSession(Number(l.dataset.roomId));c&&i&&St.confirm(bt(Un,{session:i,message:c}),"发送给: ",{confirmButtonText:"确定",cancelButtonText:"取消",draggable:!0,dangerouslyUseHTMLString:!0}).then(()=>{re.sendMsg({roomId:Number(l.dataset.roomId),msgType:c.message.type,body:c.message.body}).send().then(f=>{r.pushMsg(f),r.updateSessionLastActiveTime(Number(l.dataset.roomId))})})}}},p=()=>{var u,l,c,i;(u=s.value)==null||u.addEventListener("dragstart",v.dragStart),(l=s.value)==null||l.addEventListener("dragover",v.dragOver),(c=s.value)==null||c.addEventListener("dragleave",v.dragLeave),(i=s.value)==null||i.addEventListener("drop",v.drop)},b=()=>{var u,l,c,i;(u=s.value)==null||u.removeEventListener("dragstart",v.dragStart),(l=s.value)==null||l.removeEventListener("dragover",v.dragOver),(c=s.value)==null||c.removeEventListener("dragleave",v.dragLeave),(i=s.value)==null||i.removeEventListener("drop",v.drop)};return Se(()=>{p()}),va(()=>{window.removeEventListener("keydown",n),b(),Wa()}),(u,l)=>{const c=Pt,i=j("Icon"),f=j("VideoPlayer"),h=j("LoginBox");return E(),R("main",qn,[A("div",{class:"wrapper",ref_key:"container",ref:s},[d(ss),d(_(_t))],512),Fn,_(a).isShowing?(E(),ee(c,{key:0,"z-index":5e3,"initial-index":0,"zoom-rate":1.1,"hide-on-click-modal":!0,"url-list":[_(a).previewUrl],onClose:l[0]||(l[0]=w=>_(a).close())},null,8,["url-list"])):Z("",!0),_(t).isPlaying?(E(),R("div",Vn,[d(i,{icon:"guanbi1",class:"close",size:30,onClick:l[1]||(l[1]=w=>_(t).close())}),d(f,{url:_(t).previewUrl,style:{"pointer-events":"auto"}},null,8,["url"])])):Z("",!0),d(is),d(h),d(In),d(Nn)])}}});const Jn=ae(Gn,[["__scopeId","data-v-dac9418b"]]);export{Jn as default};
